{% extends 'base.html' %}

{% block title %}Dashboard - User Management{% endblock %}
{% block page_title %}Dashboard{% endblock %}
{% block breadcrumb %}Dashboard{% endblock %}
{% load custom_filters %}  
{% block content %}

<div class="row">
  <!-- Statistics Cards -->
  <div class="col-lg-3 col-6">
    <div class="small-box bg-primary">
      <div class="inner">
        <h3>{{ total_users }}</h3>
        <p>Total Users</p>
      </div>
      <div class="icon">
        <i class="fas fa-users"></i>
      </div>
      <a href="{% url 'users' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>

  <div class="col-lg-3 col-6">
    <div class="small-box bg-warning">
      <div class="inner">
        <h3>{{ total_companies }}</h3>
        <p>Total Companies</p>
      </div>
      <div class="icon">
        <i class="fas fa-building"></i>
      </div>
      <a href="{% url 'companies' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <div class="col-lg-3 col-6">
    <div class="small-box badge-success">
      <div class="inner">
        <h3>{{ total_follows }}</h3>
        <p>Total Company Followers</p>
      </div>
      <div class="icon">
        <i class="fas fa-user-friends"></i>
      </div>
      <a href="{% url 'company_followers_list' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <div class="col-lg-3 col-6">
    <div class="small-box badge-info">
      <div class="inner">
        <h3>{{ total_jobs }}</h3>
        <p>Total Jobs</p>
      </div>
      <div class="icon">
        <i class="fas fa-briefcase"></i>
      </div>
      <a href="{% url 'job_posts_list' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <div class="col-lg-3 col-6">
    <div class="small-box badge-success">
      <div class="inner">
        <h3>{{ total_job_applications }}</h3>
        <p>Total Applications</p>
      </div>
      <div class="icon">
        <i class="fas fa-user-tie"></i>
      </div>
      <a href="{% url 'job_applications_list' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
    <div class="col-lg-3 col-6">
    <div class="small-box badge-info">
      <div class="inner">
        <h3>{{ total_articles}}</h3>
        <p>Total Articles</p>
      </div>
      <div class="icon">
        <i class="fas fa-newspaper"></i>
      </div>
      <a href="{% url 'articles_list' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- Add more stat cards here -->
</div> <!-- Close first row -->

<div class="row mt-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Quick Actions</h3>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-2 col-sm-4 col-6 mb-3">
            <a href="{% url 'add_user' %}" class="btn btn-success btn-block">
              <i class="fas fa-user-plus"></i> Add User
            </a>
          </div>
          <div class="col-md-2 col-sm-4 col-6 mb-3">
            <a href="{% url 'add_company' %}" class="btn btn-info btn-block">
              <i class="fas fa-building"></i> Add Company
            </a>
          </div>
          <div class="col-md-2 col-sm-4 col-6 mb-3">
            <a href="{% url 'add_company_follower' %}" class="btn btn-warning btn-block">
              <i class="fas fa-user-plus"></i> Add Follower
            </a>
          </div>
          <div class="col-md-2 col-sm-4 col-6 mb-3">
            <a href="{% url 'add_job_post' %}" class="btn btn-primary btn-block">
              <i class="fas fa-briefcase"></i> Add Job Post
            </a>
          </div>
          <div class="col-md-2 col-sm-4 col-6 mb-3">
            <a href="{% url 'add_job_application' %}" class="btn btn-success btn-block">
              <i class="fas fa-file-alt"></i> Add Application
            </a>
          </div>
          <div class="col-md-2 col-sm-4 col-6 mb-3">
            <a href="{% url 'add_article' %}" class="btn btn-info btn-block">
              <i class="fas fa-file-alt"></i> Add Article
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block extra_scripts %}
<script>
$(document).ready(function() {
  // Show welcome notification using AdminLTE toast
  setTimeout(function() {
    $(document).Toasts('create', {
      class: 'bg-primary',
      title: 'Welcome to User Management System',
      subtitle: 'Just now',
      body: `
        <p><strong>Welcome, {{ current_user.full_name }}!</strong></p>
        <p>Role: <span class="badge badge-success">Super Administrator</span></p>
        <p>Last login: {{ current_user.created_at|date:"M d, Y H:i" }}</p>
      `,
      position: 'bottomRight',
      autohide: false,
    //   delay: 5000
    });
  }, 1000);
});
</script>
{% endblock %}